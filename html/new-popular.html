<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Populars - Netflix</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/home.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Salin Navbar dari home.html dan ubah link aktif -->
    <!-- Tambahkan class "active" pada nav-link TV Shows -->
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="https://www.freepnglogos.com/uploads/netflix-logo-0.png" alt="Netflix" height="28">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="movies.html">Movies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="new-popular.html">New & Popular</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="my-list.html">My List</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <div class="search-box me-3">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Titles, people, genres" class="search-input">
                    </div>
                    <a href="#" class="nav-link me-3">
                        <i class="fas fa-bell"></i>
                    </a>
                    <div class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png" alt="Profile" class="profile-img">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="profiles.html">Switch Profiles</a></li>
                            <li><a class="dropdown-item" href="#">Account</a></li>
                            <li><a class="dropdown-item" href="#">Help Center</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="../index.html">Sign out of Netflix</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!-- Konten TV Shows -->
    <div class="content-container mt-5 pt-5">
        <div class="movie-title">A meeting that can't be forgotten.</div>
    </div>
    <div class="content-container mt-1">
        <h2 class="mt-4">First Date - Blok M</h2>
        <div class="movies-row-page" id="first-date-row">
        </div>
    </div>
    <!-- Bandung -->
    <div class="content-container mt-1">
        <h2 class="mt-4">Anniversary Date</h2>
        <div class="movies-row-page" id="aniv-date-row">
        </div>
    </div>
    <!-- Naya Gradu -->
    <div class="content-container mt-1">
        <h2 class="mt-4">Naya's Graduation Day</h2>
        <div class="movies-row-page" id="naya-gradu-row">
        </div>
    </div>
    <!-- Bandung -->
    <div class="content-container mt-1">
        <h2 class="mt-4">Bandung Date</h2>
        <div class="movies-row-page" id="bandung-date-row">     
        </div>
    </div>
    <div class="content-container mt-1">
        <h2 class="mt-4">Rio Birthday</h2>
        <div class="movies-row-page" id="rio-birthday-row"> 
        </div>
    </div>
    <div class="content-container mt-1">
        <h2 class="mt-4">Naya Birthday</h2>
        <div class="movies-row-page" id="naya-birthday-row">    
        </div>
    </div>

    <!-- Audio Modal -->
    <div class="modal fade" id="audioModal" tabindex="-1" aria-labelledby="audioModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white text-center" style="border-radius: 1.5rem;">
          <div class="modal-body p-4">
            <img src="../img/lany.jpg" alt="Cover Lagu" class="rounded shadow mb-3" style="width:120px;height:120px;object-fit:cover;">
            <h5 class="fw-bold mb-1" id="audioModalLabel">Out Of My League</h5>
            <div class="mb-3" style="font-size: 0.95rem;">Lany</div>
            <audio id="popupAudio" src="../audio/lany.mp3"></audio>
            <button id="playAudioBtn" class="btn btn-success btn-lg rounded-pill px-4">
              <i class="fas fa-play me-2"></i>Play
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Tampilkan modal saat halaman dibuka, hanya bisa ditutup dengan tombol Play
      window.addEventListener('DOMContentLoaded', function() {
        var audioModal = new bootstrap.Modal(document.getElementById('audioModal'), {
          backdrop: 'static',
          keyboard: false
        });
        audioModal.show();

        document.getElementById('playAudioBtn').onclick = function() {
          document.getElementById('popupAudio').play();
          audioModal.hide(); // Tutup modal setelah play
        };
      });
    </script>

    <script>
        // Daftar tempat, jumlah file, dan prefix
        const news = [
        { id: 'first-date-row', folder: 'first-date', prefix: 'first-date', count: 4, title: 'First Date - Blok M' },
        { id: 'aniv-date-row', folder: 'aniv-date', prefix: 'aniv-date', count: 9, title: 'Aniv Date - Aeon JGC' },
        { id: 'naya-gradu-row', folder: 'naya-gradu', prefix: 'naya-gradu', count: 7, title: 'Naya Graduation - Balai Sudirman' },
        { id: 'bandung-date-row', folder: 'bandung-date', prefix: 'bandung-date', count: 19, title: 'Bandung' },
        { id: 'rio-birthday-row', folder: 'rio-birthday', prefix: 'rio-birthday', count: 9, title: 'Rio Birthday' },
        { id: 'naya-birthday-row', folder: 'naya-birthday', prefix: 'naya-birthday', count: 18, title: 'Naya Birthday' }
        ];
        
        // Fungsi cek file exist
        function checkImage(src, callback) {
        const img = new Image();
        img.onload = () => callback(true, src);
        img.onerror = () => callback(false, src);
        img.src = src;
        }

        news.forEach(place => {
        const row = document.getElementById(place.id);
        if (!row) return;
        row.innerHTML = '';
        for (let i = 1; i <= place.count; i++) {
            const basePath = `../img/new/${place.folder}/${place.prefix} (${i})`;
            const tryExts = ['jpg', 'jpeg'];
            (function(idx){
            function tryLoad(extIdx) {
                if (extIdx >= tryExts.length) return; // Tidak ditemukan
                const imgSrc = `${basePath}.${tryExts[extIdx]}`;
                checkImage(imgSrc, (exists) => {
                if (exists) {
                    row.innerHTML += `
                    <div class="movies-item-page">
                        <img src="${imgSrc}" alt="${place.title}">
                        <div class="movie-title">${place.title}</div>
                    </div>
                    `;
                } else {
                    tryLoad(extIdx + 1);
                }
                });
            }
            tryLoad(0);
            })(i);
        }
        });
    </script>
</body>
</html>
